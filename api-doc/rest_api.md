## 1. Hint

 - **Request type:** POST
 - **Endpoint**:

	 > /api/hint 

	 > /api/hint/max/**{max}**

 - **Description**: Return hint list for given text 
 - **Data**: 

	 - ***Request body  (required)*** – to this text will be returned hints, 
	 - **max (optional)** – max hint count, default is set to 20 

 - **Returned value(json)**:

> [{   
> 	 "iri": "https://www (...) Codes-BA/Entity", 
> 	 "label": "entity", "relevancy": 6.6 }, 
> 	  (…) ]

   ## 2. Search Details

 - **Request type:** POST
 - **Endpoint**:

	 > /api/search 

 - **Description**: Return a details about resource from given iri
 - **Data**: 

	 - ***Request body (required)*** – resource iri 

 - **Returned value(json)**:

> {  "type": "details", 
> "result": { "label": "FinancialContextAndProcess", 
> "iri": "https://spec.edmcouncil.org/fibo/ontology/BP/Process/FinancialContextAndProcess/", 
> "type": null, 
> "qName": "QName: NONE:", 
> "taxonomy": [**(...)**], 
> "locationInModules":[
> "https://spec.edmcouncil.org/fibo/ontology/BP/MetadataBP/BPDomain", 
> "https://spec.edmcouncil.org/fibo/ontology/BP/Process/MetadataBPProcess/ProcessModule", 
> "https://spec.edmcouncil.org/fibo/ontology/BP/Process/FinancialContextAndProcess/"], 
> "graph": null, 
> "maturityLevel": { "label": "provisional", "iri":"https://spec.edmcouncil.org/fibo/ontology/FND/Utilities/AnnotationVocabulary/Provisional"}, 
> "properties": { **(…)** } 
> }
> }

## 3. Text search

* **Request type:** POST

 - **Endpoint**:

	 > /api/search/

	 > /api/search/max/**{max}**

	 > /api/search/page/**{page}**

	 > /api/search/max/**{max}**/page/**{page}** 

 - **Description**: Return a search results as list of sorted elements for given text from request body 
 - **Data**: 

	 - **Request body (required)** – text
	 - **max (optional)** – max result count, default 100
	 - **page (optional)** – page numer, default 1

 - **Returned value(json)**:

> {
> **"type": "list", **
> **"result":** [{ "iri": "https://spec **(...)** /LegalRight", 
> "label": "legal right", 
> "description": "a contingent right or privilege **(…)** statutes, regulations, ...", 
> "relevancy": 4.546 }, 
> **(…)**  ], 
> "**query**": "swap", 
> "**page**": 1, 
> "**hasMore**": true, 
> "**maxPage**": 15 }

## 4. Modules

* **Request type:** GET

 - **Endpoint**:

	 > /api/module

 - **Description**: Return a list of Fibo modules and all submodules from fibo ontology 
 - **Data**: 

	 - none

 - **Returned value(json)**:

> [{   "**iri**": "https://spec.edmcouncil.org/fibo/ontology/BE/MetadataBE/BEDomain", 
> "**label**": "Business Entities", 
> "**subModule**": [(next list of modules..)], 
> "**maturityLevel**": {
> "label": "prod"
> }   }, 
> (...)   ]

## 5. Add a new update request to the queue 

 - **Request type:** PUT

 - **Description**: Add a new update request to the queue and return information about it

 - **{API_KEY}** - API Key generated by Onto-Viewer

 - **API key required in header**

	- **Header:** 

		> X-API-Key: **{API_KEY}**

	- **Endpoint**:

		> /api/update  

	

- **API key required in path**

	- **Endpoint**:

		> /api/update?ApiKey=**{API_KEY}**
 		

 - **Returned value(json)**:

	>{
	 > "id": "0",
	 > "status": "IN_PROGRESS",
	  >"msg": "",
	  >"startTimestamp": 1594627080217
	>}

## 6. Get update status

 - **Request type:** GET 

 - **Description**: Return update status for given update id 

 - **API_KEY** - API Key generated by Onto-Viewer

 - **UPDATE_ID** - Generated update id

 - **API key required in header**

	- **Header:** 

		> X-API-Key: **{API_KEY}**

	- **Endpoint**:

		> /api/update?updateId=**{UPDATE_ID}**  

- **API key required in path**

	- **Endpoint**:

		> /api/update?ApiKey=**{API_KEY}**&updateId=**{UPDATE_ID}**

 - **Returned value(json)**:

	>{
	 > "id": "0",
	 > "status": "DONE",
	  >"msg": "",
	  >"startTimestamp": 1594627080217
	>}
	

 - **Possible status field values:**
	- WAITING
	- CREATED
	- IN_PROGRESS
 	- DONE 
	- ERROR
	- INTERRUPT_IN_PROGRESS

## 7. Simple stats

* **Request type:** GET

 - **Endpoint**:

	 > /api/stats

 - **Description**: Return a simple ontology stats.
 - **Data**: 

	 - none

 - **Returned value(json)**:

> {"stats":{"@viewer.stats.noDomain":10,... },
> "labels":{"@viewer.stats.noDomain":"number of domains",...}}

## 8. Custom Health check

* **Request type:** GET

 - **Endpoint**:

	 > /actuator/health/

 - **Description**: Return custom health check with additional information about initialization and update.
 - **Data**: 

	 - none

 - **Returned value(json)**:

> {   "status": "UP",   "components": {
>     "custom": {
>       "status": "UP",
>       "details": {
>         "blocked": false,
>         "initialization done": true,
>         "update now": false
>       }}}}


 - **Details fields description:**
	- "INITIALIZATION_DONE" - Initialization done is when the application is started and loaded for the first time.
	- "UPDATE_ONTOLOGY_IN_PROGRESS" - Update now is when the ontology is updated.
	- "BLOCKED" - The block is when the resources are replaced with new ones during the update.

  ## 9. Search logs

### /api/logs (GET)

#### Description

- When the application is run, a folder "logs" is created in onto-viewer-web-app.
- This folder contains the "viewer-logs" file with the current logs.
- Each day a new log file is generated. The previous day's file goes into the "archiverd" folder and is renamed to "viewer-logs-yyyy-mm-dd".
- If the current "viewer-logs" file has more than 1GB of data, a new file will be generated.
- To get the logs, make a REST request, e.g:
	<host_and_port>/api/logs?date=2022-01-21

#### Example Response

```text
[
  2022-01-21 15:54:34,599 INFO org.edmcouncil.spec.ontoviewer.webapp.controller.HintController [http-nio-8080-exec-10] For hints: 'mon' (query time: '46' ms) result is:
 [{iri=https://www.omg.org/spec/LCC/Languages/ISO639-2-LanguageCodes/mon, label=mon, relevancy=10.0}, {iri=https://www.omg.org/spec/LCC/Languages/ISO639-2-LanguageCodes/Hmong, label=Hmong, relevancy=6.0}, {iri=https://www.omg.org/spec/LCC/Languages/ISO639-2-LanguageCodes/Mongo, label=Mongo, relevancy=6.0},
]
```